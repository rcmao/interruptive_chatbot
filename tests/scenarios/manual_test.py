"""
æ‰‹åŠ¨æµ‹è¯•åœºæ™¯è„šæœ¬
ç”¨äºåœ¨Discordç¯å¢ƒä¸­æ‰‹åŠ¨æµ‹è¯•ç³»ç»ŸåŠŸèƒ½
"""

import asyncio
from datetime import datetime
from main import RealTimeInteractionModule

class ManualTestSuite:
    """æ‰‹åŠ¨æµ‹è¯•å¥—ä»¶"""
    
    def __init__(self, api_key: str, api_base: str):
        self.interaction_module = RealTimeInteractionModule(api_key, api_base)
        self.test_scenarios = self._create_test_scenarios()
    
    def _create_test_scenarios(self):
        """åˆ›å»ºæµ‹è¯•åœºæ™¯"""
        return {
            "scenario_1": {
                "name": "è½»åº¦æŠ€æœ¯åˆ†æ­§",
                "description": "å…³äºæŠ€æœ¯é€‰å‹çš„æ­£å¸¸è®¨è®º",
                "messages": [
                    "æˆ‘è§‰å¾—æˆ‘ä»¬åº”è¯¥ç”¨Reactæ¥å¼€å‘å‰ç«¯",
                    "Vue.jså¯èƒ½æ›´é€‚åˆæˆ‘ä»¬çš„å›¢é˜Ÿ",
                    "Reactçš„ç”Ÿæ€ç³»ç»Ÿç¡®å®æ›´æˆç†Ÿä¸€äº›",
                    "ä½†æ˜¯Vueçš„å­¦ä¹ æ›²çº¿æ›´å¹³ç¼“"
                ],
                "expected": "æ— å¹²é¢„æˆ–è½»åº¦åä½œå¹²é¢„"
            },
            
            "scenario_2": {
                "name": "è§‚ç‚¹å†²çªå‡çº§",
                "description": "ä»åˆ†æ­§åˆ°æƒ…ç»ªåŒ–è¡¨è¾¾",
                "messages": [
                    "è¿™ä¸ªè®¾è®¡æ–¹æ¡ˆæœ‰é—®é¢˜",
                    "æˆ‘ä¸è§‰å¾—æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œå¾ˆåˆç†å•Š",
                    "ä½ ä»ä¸è®¤çœŸè€ƒè™‘ç”¨æˆ·ä½“éªŒ",
                    "ä½ é”™äº†ï¼Œæˆ‘ä¸€ç›´å¾ˆå…³æ³¨ç”¨æˆ·ä½“éªŒ",
                    "ä½ æ€»æ˜¯è¿™æ ·å›ºæ‰§å·±è§"
                ],
                "expected": "ä¸­åº¦å¹²é¢„ï¼Œç«äº‰æˆ–åä½œç­–ç•¥"
            },
            
            "scenario_3": {
                "name": "æ¿€çƒˆäº‰è®º",
                "description": "é«˜å¼ºåº¦å†²çªåœºæ™¯",
                "messages": [
                    "è¿™ä¸ªæƒ³æ³•å®Œå…¨è’è°¬ï¼",
                    "ä½ æ ¹æœ¬ä¸æ‡‚è¿™ä¸ªé¢†åŸŸï¼Œåˆ«èƒ¡è¯´å…«é“",
                    "ä½ æ‰æ˜¯ä»€ä¹ˆéƒ½ä¸æ‡‚çš„äººï¼",
                    "æˆ‘å—å¤Ÿäº†ä½ çš„æ— ç†å–é—¹",
                    "é‚£ä½ å°±åˆ«å‚ä¸è¿™ä¸ªé¡¹ç›®äº†"
                ],
                "expected": "ç«‹å³å¹²é¢„ï¼Œç«äº‰ç­–ç•¥"
            },
            
            "scenario_4": {
                "name": "å‘è¨€æƒä¸å¹³è¡¡",
                "description": "ä¸€æ–¹è¿‡åº¦ä¸»å¯¼è®¨è®º",
                "messages": [
                    "æˆ‘è®¤ä¸ºæˆ‘ä»¬åº”è¯¥è¿™æ ·åšï¼šé¦–å…ˆ...",
                    "ç„¶åæˆ‘ä»¬éœ€è¦è€ƒè™‘...",
                    "å¦å¤–è¿˜æœ‰ä¸€ä¸ªé‡è¦çš„ç‚¹...",
                    "ç­‰ç­‰ï¼Œè®©æˆ‘ä¹Ÿè¯´å‡ å¥...",
                    "æœ€åï¼Œæˆ‘æƒ³å¼ºè°ƒçš„æ˜¯..."
                ],
                "expected": "åŒ…å®¹ç­–ç•¥å¹²é¢„"
            }
        }
    
    def print_scenario_instructions(self):
        """æ‰“å°æµ‹è¯•è¯´æ˜"""
        print("ğŸ¯ æ‰‹åŠ¨æµ‹è¯•åœºæ™¯æŒ‡å—")
        print("=" * 50)
        print("åœ¨Discordé¢‘é“ä¸­æŒ‰é¡ºåºå‘é€ä»¥ä¸‹æ¶ˆæ¯ï¼Œè§‚å¯Ÿæœºå™¨äººå“åº”ï¼š\n")
        
        for scenario_id, scenario in self.test_scenarios.items():
            print(f"ã€{scenario['name']}ã€‘")
            print(f"æè¿°: {scenario['description']}")
            print(f"é¢„æœŸç»“æœ: {scenario['expected']}")
            print("æµ‹è¯•æ¶ˆæ¯:")
            
            for i, message in enumerate(scenario["messages"], 1):
                print(f"  {i}. {message}")
            
            print(f"{'='*50}\n")
    
    def generate_test_checklist(self):
        """ç”Ÿæˆæµ‹è¯•æ£€æŸ¥æ¸…å•"""
        checklist = """
ğŸ” æµ‹è¯•æ£€æŸ¥æ¸…å•

## åŠŸèƒ½æµ‹è¯•
- [ ] æ¶ˆæ¯ç›‘å¬æ­£å¸¸å·¥ä½œ
- [ ] å†²çªåˆ†æ•°è®¡ç®—å‡†ç¡®
- [ ] æƒ…ç»ªåŒ–è¡¨è¾¾æ£€æµ‹æœ‰æ•ˆ
- [ ] å‘è¨€æƒé—®é¢˜è¯†åˆ«æ­£ç¡®
- [ ] æ‰“å­—è¡Œä¸ºåˆ†æå·¥ä½œ
- [ ] TKIç­–ç•¥é€‰æ‹©åˆç†
- [ ] å¹²é¢„æ¶ˆæ¯ç”Ÿæˆè‡ªç„¶
- [ ] å†·å´æœºåˆ¶é˜²æ­¢è¿‡åº¦å¹²é¢„

## æ€§èƒ½æµ‹è¯•
- [ ] å“åº”æ—¶é—´ < 200ms
- [ ] å¹¶å‘å¤„ç†èƒ½åŠ›æ­£å¸¸
- [ ] å†…å­˜ä½¿ç”¨åˆç†
- [ ] APIè°ƒç”¨é¢‘ç‡é€‚ä¸­

## è¾¹ç•Œæµ‹è¯•
- [ ] ç©ºæ¶ˆæ¯å¤„ç†
- [ ] ç‰¹æ®Šå­—ç¬¦å¤„ç†
- [ ] é•¿æ¶ˆæ¯å¤„ç†
- [ ] å¿«é€Ÿè¿ç»­æ¶ˆæ¯
- [ ] ç½‘ç»œå¼‚å¸¸å¤„ç†
- [ ] APIå¤±è´¥é™çº§

## ç”¨æˆ·ä½“éªŒæµ‹è¯•
- [ ] å¹²é¢„æ—¶æœºåˆé€‚
- [ ] å¹²é¢„æ¶ˆæ¯å‹å¥½
- [ ] ä¸å½±å“æ­£å¸¸è®¨è®º
- [ ] ç”¨æˆ·æ¥å—åº¦é«˜

## éƒ¨ç½²å‰æœ€ç»ˆæ£€æŸ¥
- [ ] æ‰€æœ‰å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] é›†æˆæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æ»¡è¶³è¦æ±‚
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ—¥å¿—è®°å½•å®Œæ•´
- [ ] é…ç½®æ–‡ä»¶æ­£ç¡®
        """
        
        with open("test_checklist.md", "w", encoding="utf-8") as f:
            f.write(checklist)
        
        print("âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•å·²ç”Ÿæˆ: test_checklist.md")

if __name__ == "__main__":
    # åˆ›å»ºæµ‹è¯•å¥—ä»¶
    test_suite = ManualTestSuite("your_api_key", "your_api_base")
    
    # æ‰“å°æµ‹è¯•è¯´æ˜
    test_suite.print_scenario_instructions()
    
    # ç”Ÿæˆæ£€æŸ¥æ¸…å•
    test_suite.generate_test_checklist()
    
    print("ğŸ“– æ‰‹åŠ¨æµ‹è¯•å‡†å¤‡å°±ç»ªï¼")
    print("1. å¯åŠ¨æœºå™¨äºº: python main.py")
    print("2. åœ¨Discordé¢‘é“ä¸­æ‰§è¡Œæµ‹è¯•åœºæ™¯")
    print("3. ä½¿ç”¨æ£€æŸ¥æ¸…å•éªŒè¯åŠŸèƒ½") 